!function(e){function t(e,t){this.agent=e,this.contrAgent=t||{},this._resultCallbacks={},this._resultCallbacksIndex=0,this._onMessage=this._onMessage.bind(this),this.agent.win.addEventListener("message",this._onMessage)}return t.prototype={invokeMethod:function(e,t,n){return t=[].concat(t),this._invokeMethod(e,t,n),this},clean:function(){this.agent.win.removeEventListener("message",this._onMessage),this.agent=void 0,this.contrAgent=void 0,this._resultCallbacks=void 0,this._resultCallbacksIndex=0},_checkOrigin:function(e){if(!e||"null"===e)return!1;var t,n;try{return t=document.createElement("a"),t.href=e,n=t.hostname,"string"==typeof n&&""!==n&&this._whiteList.some(function(e){var t=e.replace(/\./g,"\\.")+"$",i=n.replace(new RegExp(t),"");return 0===i.length||i!==n&&"."===i[i.length-1]})}catch(i){}},_onMessage:function(e){if(this._checkOrigin(e.origin)&&this.contrAgent&&this.contrAgent.win&&e.source===this.contrAgent.win){var t=e.data;try{t=JSON.parse(t)}catch(n){return}var i;if(t.methodCall){if(this.contrAgent.url||(this.contrAgent.url=e.origin),this.agent[t.methodCall]){var r,s=t.params;i=t.resultCallbackIndex?this._deInstrumentCallback(t.resultCallbackIndex):[],t.paramsCallbackIndex&&(s=[].concat(s,this._deInstrumentCallback(t.paramsCallbackIndex))),r=this.agent[t.methodCall].apply(this.agent,s),t.resultCallbackIndex&&i(r)}}else t.returnCall&&(i=this._idObjToCallback(t.resultCallbackIndex),i&&i.apply(this.agent,[].concat(t.params)))}},_invokeCallback:function(e,t){this._invokeMethod("",t,e)},_callbackToIdObj:function(e){var t=++this._resultCallbacksIndex;return this._resultCallbacks[t]=e,{__callbackId:t}},_idObjToCallback:function(e){var t=e,n=this._resultCallbacks[t];return delete this._resultCallbacks[t],n},_instrumentCallback:function(e){return this._callbackToIdObj(e)},_deInstrumentCallback:function(e){return function(){setTimeout(function(t){this.contrAgent&&this._invokeCallback(e.__callbackId,[].slice.call(t))}.bind(this,arguments),0)}.bind(this)},_invokeMethod:function(e,t,n){var i;if(e){var r,s=t&&t.pop();"function"==typeof s?r=this._instrumentCallback(s):t&&t.push(s),i={methodCall:e,params:t,paramsCallbackIndex:r,resultCallbackIndex:n&&this._instrumentCallback(n)}}else i={returnCall:!0,params:t,resultCallbackIndex:n};i=JSON.stringify(i),this.contrAgent.win&&this.contrAgent.win.postMessage(i,this.contrAgent.url)},_whiteList:["yandex.ru","yandex.net","yastatic.net","yandex.by","yandex.ua","yandex.com.tr","yandex.kz","yandex.com","yandex.az","yandex.co.il","yandex.com.am","yandex.com.ge","yandex.ee","yandex.fr","yandex.kg","yandex.lt","yandex.lv","yandex.md","yandex.tj","yandex.tm","yandex.uz","яндекс.рф","auto.ru","kinopoisk.ru"]},e.RPC=t}(window),function(e,t){function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function i(e){return decodeURIComponent(e)}function r(e){var t=location.hostname.replace("www.","").split("."),n=t[0],i=t.reverse()[0];if("tr"===i&&(i="com.tr"),"yandex"===n){var r=location.pathname.split("/")[1];n="pogoda"===r?"weather":r}e||(e={}),e.iframeUrl||(e.iframeUrl="https://yastatic.net/daas/stripe.html"),e.hasOwnProperty("autoDestruct")||(e.autoDestruct=!0),e.ua||(e.ua=encodeURIComponent(navigator.userAgent)),e.referer||(e.referer=encodeURIComponent(location.href)),e.referer_origin=encodeURIComponent(document.referrer),e.tld||(e.tld=i),e.service||(e.service=n),e.counterUrl="https://yandex."+e.tld+"/clck/jclck",e.lang||(e.lang=i),e.zIndex||(e.zIndex=42e6),e.exp_confs=s("exp_confs"),e.enablePopup=Boolean(s("enable_popup")),e.ysSchema||(e.ysSchema={domain:".yandex."+i,path:"/"}),e.ypSchema||(e.ypSchema={expires:new Date("Tue Jan 1 00:00:00 2038"),domain:".yandex."+i,path:"/"}),e.yandex_gid||(e.yandex_gid=this.cookies.get("yandex_gid")),e.yandexuid||(e.yandexuid=this.cookies.get("yandexuid")),e.ys||(e.ys=this.ysRead()),e.yp||(e.yp=this.ypRead()),e.yc||(e.yc=this.ycRead()),e.login=this.cookies.get("yandex_login")?1:null,e.loginPopupPresent=a(),this.params=e}function s(e){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(i){n=i.split("="),n[0]===e&&(t=decodeURIComponent(n[1]))}),t}function a(){return Boolean(document.getElementsByClassName("serp-user__login-popup").length)||Boolean(document.getElementsByClassName("serp-user__promo-popup").length)}var o={get:function(e){var t=this.getAll();return t[e]||""},getAll:function(){for(var e=this.readCookie(),t=e?e.split("; "):[],n={},i=0;i<t.length;i++){var r=t[i].split("="),s=r[0],a=r.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1)),n[s]=a}return n},set:function(e,t,n){var i,r;n||(n={}),i=n.expires,"number"==typeof i&&(i=new Date(Date.now()+24*i*60*60*1e3)),r=[e,"=",t,i&&"; expires="+i.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join(""),this.writeCookie(r)},remove:function(e){this.set(e,"",{expires:-1})},readCookie:function(){return document.cookie},writeCookie:function(e){document.cookie=e}};r.SmartBanner=function(e){return e||(e={}),e.iframeUrl||(e.iframeUrl="https://yastatic.net/daas/smartbanner.html"),e.distributionType="smart_banner",new r(e)},r.StripePad=function(e){return e||(e={}),e.iframeUrl||(e.iframeUrl="https://yastatic.net/daas/stripe-pad.html"),e.distributionType="stripe",new r(e)},r.DistrPopup=function(e){return e||(e={}),e.iframeUrl||(e.iframeUrl="https://yastatic.net/daas/distr-popup.html"),e.distributionType="popup",new r(e)},r.whenInited=function(e){setTimeout(e,0)},r.prototype={win:e,getParams:function(){return this.params},cookies:o,defaultExpires:Math.round(Date.now()/1e3)+31536e3,ysRead:function(){var e=this.cookies.get("ys"),t=e?e.split("#"):[],n={};return t.forEach(function(e){var t=e.split("."),r=t[0],s=t.slice(1).join(".");n[r]=i(s)}),n},ypRead:function(){for(var e=this.cookies.get("yp"),t=e?e.split("#"):[],n=new Date/1e3,r={},s=0,a=t.length;s<a;s++){var o=t[s].split("."),c=o[0],h=o[1],l=o.slice(2).join(".");c>n&&(r[h]={value:i(l),expires:c})}return r},ycRead:function(){return this.cookies.get("yc")},ysWrite:function(e){for(var t=[],i=0,r=Object.keys(e),s=r.length;i<s;i++)t.push([r[i],n(e[r[i]])].join("."));this.cookies.set("ys",t.join("#"),this.params.ysSchema)},ypWrite:function(e){for(var t=[],i=0,r=Object.keys(e),s=r.length;i<s;i++)t.push([e[r[i]].expires,r[i],n(e[r[i]].value)].join("."));this.cookies.set("yp",t.join("#"),this.params.ypSchema)},ys:function(e,t){var n=this.ysRead();return t?(n[e]=t,this.ysWrite(n)):n[e]},yp:function(e,t,n){var i=this.ypRead(),r=i[e];return 1===arguments.length?r&&r.value:(r||(r={}),r.value=t,r.expires=n||r.expires||this.defaultExpires,i[e]=r,this.ypWrite(i))},applyStyleToBody:function(e){Object.keys(e).forEach(function(t){document.body.style[t]=e[t]})},getStylesFromBody:function(e){return[].concat(e).reduce(function(e,t){return e[t]=document.body.style[t],e},{})},applyStyleToIframe:function(e){this.iframe&&Object.keys(e).forEach(function(t){this.iframe.style[t]=e[t]},this)},initIframe:function(e){var t=this.params.data["source-aux"]&&this.params.data["source-aux"].product;if(this.params.login&&"login"===t)return this.destruct(!0),new Error("no-data");var n=document.createElement("iframe");n.frameBorder=0,n.src=this.params.iframeUrl,n.style.display="block",n.style.width=0,n.style.height=0,n.style.zIndex=this.params.zIndex,n.style.transform="translate3d(0px, 0px, 0px)",n.setAttribute("aria-hidden","true"),n.onload=function(){e.contrAgent.win=n.contentWindow,e.invokeMethod("init",this.getParams())}.bind(this),this.container.appendChild(n),this.iframe=n},subscribeToResize:function(){e.addEventListener("resize",this._bindOnResize),e.addEventListener("orientationchange",this._bindOnResize)},_onResize:function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(function(){this._isResizing=!1,this.show()}.bind(this),600),this._isResizing||(this._isResizing=!0,this.hide(!1,!0))},removeIframe:function(){this.iframe&&this.container.removeChild(this.iframe),this.iframe=void 0},applyStyleToPlaceholder:function(e){this.placeholder&&Object.keys(e).forEach(function(t){this.placeholder.style[t]=e[t]},this)},initPlaceholder:function(e){if(!this.params.disablePlaceholder){var t=document.createElement("div");t.style.position="relative","top"===e?this.container.insertBefore(t,this.container.firstChild):this.container.appendChild(t),this.placeholder=t}},removePlaceholder:function(){this.placeholder&&this.container.removeChild(this.placeholder),this.placeholder=void 0},addLink:function(e){var t=document.createElement("link");return t.rel="chrome-webstore-item",t.href=e,document.head.appendChild(t),this._link=t,Boolean(t)},removeLink:function(){this._link&&document.head.removeChild(this._link),this._link=void 0},install:function(t,n){var i=e.chrome&&e.chrome.webstore;if(i)try{i.install(t,function(){n&&n(null)},function(e){n&&n(e)})}catch(r){n&&n(r)}else n&&n("No webstore")},counter:function(e){e&&(document.createElement("IMG").src=this.params.counterUrl+"/pid="+e.pid+"/cid="+e.cid+"/path="+e.path+"/vars="+e.vars+"/*data=url%3D"+this.params.referer)},triggerEvent:function(e,t){this._events&&(this._events[e]||[]).forEach(function(n){n({type:e,target:this},t)}.bind(this))},on:function(e,t){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this},init:function(e){var n=navigator.userAgent;if(/msie|trident/i.test(n)&&parseInt(n.split(/msie|rv:/i)[1],10)<=8)return this;var i=n.split("YaApp_iOS/");return i.length>1?this:(e||(e={}),this.container=e.container||document.body,this.rpcBridge=new t(this,{url:this.params.iframeUrl}),this.params.host=this.params.atomUrl||"https://mobile.yandex.net/search/atomsearch/daas",e.data&&e.data["source-aux"]?(this.params.data=e.data,this.initIframe(this.rpcBridge)):this.getData(e,function(e){this.params.data=e,this.initIframe(this.rpcBridge)}.bind(this)),this._bindOnResize=this._onResize.bind(this),this.on("after-close",this.destruct.bind(this,this.params.autoDestruct)),this.on("no-data",this.destruct.bind(this,this.params.autoDestruct)),this.on("redirect",this.redirect.bind(this)),this)},hide:function(e,t){return this.rpcBridge&&this.rpcBridge.invokeMethod("hide",[Boolean(t),e]),this},show:function(e,t){return this.rpcBridge&&this.rpcBridge.invokeMethod("show",[Boolean(t),e]),this},destruct:function(t){return t?(this.rpcBridge&&this.rpcBridge.clean(),this.rpcBridge=void 0,this.removeIframe(),this.removePlaceholder(),this.removeLink(),void(this._events=void 0)):(e.removeEventListener("resize",this._bindOnResize),void e.removeEventListener("orientationchange",this._bindOnResize))},redirect:function(t,n){e.location.href=n.href},getUrl:function(e){function t(t,n){var i=n?n:e[t];return i?"&"+t+"="+i:""}var n=e.host+"?"+t("lang")+t("tld")+t("service")+t("referer")+t("referer_origin")+t("user-agent",e.ua)+t("yandexuid")+t("ys",encodeURIComponent(JSON.stringify(e.ys)))+t("yp",encodeURIComponent(JSON.stringify(e.yp)))+t("yc",e.yc)+t("exp_confs")+t("relev")+t("lr",e.yandex_gid);return n},getData:function(e,t){function n(){return"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),new XMLHttpRequest}var i=this.getUrl(this.params);try{var r=n(),s=this;r.open("GET",i,!0),r.onload=function(){try{t(s._processData(JSON.parse(this.responseText)))}catch(e){s.rpcBridge.invokeMethod("triggerEvent","no-data")}},r.onerror=function(){s.initIframe(s.rpcBridge)},r.send()}catch(a){return this.rpcBridge.invokeMethod("triggerEvent","no-data")}},_processData:function(e){var t,n=e["client-results"]||[],i=n.filter(function(e){return e.docs}),r=i[0];return r?r.name===this.params.distributionType?r.docs[0]:(t={stripe:"stripe.html",popup:"distr-popup.html"}[r.name],this.params.iframeUrl="https://yastatic.net/daas/"+t,r.docs[0]):new Error("no-data")}};var c=e.Atom&&e.Atom.initCallbacks;if(e.Atom=r,c)for(var h=0;h<c.length;h++){var l=c[h];"function"==typeof l&&l()}return r}(window,window.RPC);